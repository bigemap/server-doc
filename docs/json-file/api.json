{
  "openapi": "3.0.0",
  "paths": {
    "/api/tileset/{tilesetId}/tilequery/{z}/{lon},{lat}.json": {
      "get": {
        "operationId": "TilesetController_queryTile",
        "summary": "",
        "description": "",
        "parameters": [
          {
            "name": "lon",
            "required": true,
            "in": "path",
            "description": "经度",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "lat",
            "required": true,
            "in": "path",
            "description": "纬度",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "z",
            "required": true,
            "in": "path",
            "description": "缩放级别",
            "example": "png",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "tilesetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "TilesetController"
        ]
      }
    },
    "/api/tileset/{tilesetId}/wms": {
      "get": {
        "operationId": "TilesetController_getTileByWms",
        "summary": "",
        "description": "",
        "parameters": [
          {
            "name": "tilesetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "TilesetController"
        ]
      }
    },
    "/api/tileset/{tilesetId}/tms/{z}/{x}/{y}{dpi}.{format}": {
      "get": {
        "operationId": "TilesetController_getTileByTms",
        "summary": "",
        "description": "",
        "parameters": [
          {
            "name": "x",
            "required": true,
            "in": "path",
            "description": "x",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "y",
            "required": true,
            "in": "path",
            "description": "y",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "z",
            "required": true,
            "in": "path",
            "description": "z",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "format",
            "required": true,
            "in": "path",
            "description": "tile 格式",
            "example": "png",
            "schema": {
              "enum": [
                "pbf",
                "mvt",
                "png",
                "webp",
                "jpg"
              ],
              "type": "string"
            }
          },
          {
            "name": "dpi",
            "required": false,
            "in": "path",
            "example": "@2x",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "tilesetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "TilesetController"
        ]
      }
    },
    "/api/tileset/{tilesetId}/tile/{z}/{x}/{y}{dpi}.{format}": {
      "get": {
        "operationId": "TilesetController_getTile",
        "summary": "",
        "description": "",
        "parameters": [
          {
            "name": "x",
            "required": true,
            "in": "path",
            "description": "x",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "y",
            "required": true,
            "in": "path",
            "description": "y",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "z",
            "required": true,
            "in": "path",
            "description": "z",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "format",
            "required": true,
            "in": "path",
            "description": "tile 格式",
            "example": "png",
            "schema": {
              "enum": [
                "pbf",
                "mvt",
                "png",
                "webp",
                "jpg"
              ],
              "type": "string"
            }
          },
          {
            "name": "dpi",
            "required": false,
            "in": "path",
            "example": "@2x",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "tilesetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "TilesetController"
        ]
      }
    },
    "/api/tileset": {
      "post": {
        "operationId": "TilesetController_create",
        "summary": "",
        "description": "",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TilesetCreateOneInputDTO"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "tags": [
          "TilesetController"
        ]
      }
    },
    "/api/tileset/process": {
      "post": {
        "operationId": "TilesetController_process",
        "summary": "",
        "description": "",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TilesetCreateOneInputDTO"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "TilesetController"
        ]
      }
    },
    "/api/queue/ping": {
      "get": {
        "operationId": "QueueController_ping",
        "summary": "",
        "description": "",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "QueueController"
        ]
      }
    },
    "/api/dataset": {
      "post": {
        "operationId": "DatasetController_create",
        "summary": "创建dataset（支持第三方数据库连接）",
        "description": "",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DatasetCreateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Dataset"
                }
              }
            }
          },
          "201": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Dataset"
                }
              }
            }
          }
        },
        "tags": [
          "DatasetController",
          "Sinopec"
        ]
      },
      "get": {
        "operationId": "DatasetController_getAll",
        "summary": "获取dataset列表",
        "description": "",
        "parameters": [
          {
            "name": "skip",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "take",
            "required": false,
            "in": "query",
            "schema": {
              "default": 20,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatasetPaginatedResult"
                }
              }
            }
          }
        },
        "tags": [
          "DatasetController",
          "Sinopec"
        ]
      }
    },
    "/api/dataset/{datasetId}/info": {
      "get": {
        "operationId": "DatasetController_getInfo",
        "summary": "",
        "description": "",
        "parameters": [
          {
            "name": "datasetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "tags": [
          "DatasetController",
          "Sinopec"
        ]
      }
    },
    "/api/dataset/{datasetId}/tilequery/{z}/{lon},{lat}.json": {
      "get": {
        "operationId": "DatasetController_queryTile",
        "summary": "tilequery查询",
        "description": "",
        "parameters": [
          {
            "name": "datasetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "lon",
            "required": true,
            "in": "path",
            "description": "经度",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "lat",
            "required": true,
            "in": "path",
            "description": "纬度",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "z",
            "required": true,
            "in": "path",
            "description": "缩放级别",
            "example": "png",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "DatasetController",
          "Sinopec"
        ]
      }
    },
    "/api/dataset/{datasetId}/{z}/{x}/{y}{dpi}.{format}": {
      "get": {
        "operationId": "DatasetController_getTile",
        "summary": "tile查询",
        "description": "",
        "parameters": [
          {
            "name": "datasetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "x",
            "required": true,
            "in": "path",
            "description": "x",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "y",
            "required": true,
            "in": "path",
            "description": "y",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "z",
            "required": true,
            "in": "path",
            "description": "z",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "format",
            "required": true,
            "in": "path",
            "description": "tile 格式",
            "example": "png",
            "schema": {
              "enum": [
                "pbf",
                "mvt",
                "png",
                "webp",
                "jpg"
              ],
              "type": "string"
            }
          },
          {
            "name": "dpi",
            "required": false,
            "in": "path",
            "example": "@2x",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "filter",
            "required": false,
            "in": "query",
            "description": "根据规则过滤图层, 会在symbols的filter规则之上做叠加,规则语法请参考 https://github.com/mapnik/mapnik/wiki/Filter,因为参数是作为query传递的因此需要转码（encodeURIComponent）",
            "example": "[row] &gt;= 16 and [col] &gt;= 10 and [project] &gt;= 14",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "DatasetController",
          "Sinopec"
        ]
      }
    },
    "/api/dataset/{datasetId}": {
      "get": {
        "operationId": "DatasetController_getOne",
        "summary": "获取dataset",
        "description": "",
        "parameters": [
          {
            "name": "datasetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Dataset"
                }
              }
            }
          }
        },
        "tags": [
          "DatasetController",
          "Sinopec"
        ]
      },
      "patch": {
        "operationId": "DatasetController_patch",
        "summary": "修改dataset",
        "description": "",
        "parameters": [
          {
            "name": "datasetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DatasetUpdateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Dataset"
                }
              }
            }
          }
        },
        "tags": [
          "DatasetController",
          "Sinopec"
        ]
      },
      "delete": {
        "operationId": "DatasetController_del",
        "summary": "删除dataset",
        "description": "",
        "parameters": [
          {
            "name": "datasetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "DatasetController",
          "Sinopec"
        ]
      }
    },
    "/api/dataset/upload": {
      "post": {
        "operationId": "DatasetController_uploadFile",
        "summary": "上传图标，大小限制为10MB",
        "description": "",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/FileUploadInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileUploadResponse"
                }
              }
            }
          },
          "201": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "tags": [
          "DatasetController",
          "Sinopec"
        ]
      }
    },
    "/api/feature/{datasetId}": {
      "post": {
        "operationId": "FeatureController_createOne",
        "summary": "创建feature",
        "description": "",
        "parameters": [
          {
            "name": "datasetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeatureCreateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Feature"
                }
              }
            }
          },
          "201": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "tags": [
          "FeatureController",
          "Sinopec"
        ]
      },
      "get": {
        "operationId": "FeatureController_getAll",
        "summary": "获取feature列表",
        "description": "",
        "parameters": [
          {
            "name": "datasetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "skip",
            "required": false,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "take",
            "required": false,
            "in": "query",
            "schema": {
              "default": 20,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeaturePaginatedResult"
                }
              }
            }
          }
        },
        "tags": [
          "FeatureController",
          "Sinopec"
        ]
      }
    },
    "/api/feature/{datasetId}/{id}": {
      "get": {
        "operationId": "FeatureController_getOne",
        "summary": "获取feature",
        "description": "",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "datasetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Feature"
                }
              }
            }
          }
        },
        "tags": [
          "FeatureController",
          "Sinopec"
        ]
      },
      "delete": {
        "operationId": "FeatureController_deleteOne",
        "summary": "删除feature",
        "description": "",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "datasetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "tags": [
          "FeatureController",
          "Sinopec"
        ]
      },
      "patch": {
        "operationId": "FeatureController_patch",
        "summary": "修改feature",
        "description": "",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "datasetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeatureUpdateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Feature"
                }
              }
            }
          }
        },
        "tags": [
          "FeatureController",
          "Sinopec"
        ]
      }
    },
    "/api/feature/{datasetId}/get-by-geometry": {
      "post": {
        "operationId": "FeatureController_getAllByGeometry",
        "summary": "获取多边形范围内的feature列表",
        "description": "",
        "parameters": [
          {
            "name": "datasetId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GetFeatureByGeometryInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Feature"
                  }
                }
              }
            }
          },
          "201": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Feature"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "FeatureController",
          "Sinopec"
        ]
      }
    }
  },
  "info": {
    "title": "API docs",
    "description": "API description",
    "version": "3.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "schemas": {
      "TilesetCreateOneInputDTO": {
        "type": "object",
        "properties": {
          "filePath": {
            "type": "string"
          }
        },
        "required": [
          "filePath"
        ]
      },
      "CustomDataSourceConnection": {
        "type": "object",
        "properties": {
          "host": {
            "type": "string"
          },
          "port": {
            "type": "number"
          },
          "username": {
            "type": "string"
          },
          "password": {
            "type": "string"
          },
          "database": {
            "type": "string",
            "description": "数据库名称"
          },
          "tableName": {
            "type": "string",
            "description": "数据库表名",
            "example": "tableName"
          }
        },
        "required": [
          "host",
          "port",
          "username",
          "password",
          "database",
          "tableName"
        ]
      },
      "SymbolRule": {
        "type": "object",
        "properties": {
          "filter": {
            "type": "string",
            "description": "按规则展示icon(支持正则),更多filter规则: https://github.com/mapnik/mapnik/wiki/Filter"
          },
          "icon": {
            "type": "string",
            "description": "icon的url(相对路径)"
          }
        },
        "required": [
          "filter",
          "icon"
        ]
      },
      "Symbols": {
        "type": "object",
        "properties": {
          "defaultIcon": {
            "type": "string",
            "description": "默认icon的url(相对路径)",
            "example": "/path/to/file"
          },
          "rules": {
            "description": "按规则展示icon(支持正则)",
            "example": [
              {
                "filter": "[status].match('1')",
                "icon": "/path/to/file"
              },
              {
                "filter": "[status] &gt;= '2'",
                "icon": "/path/to/file"
              },
              {
                "filter": "[status] = '3'",
                "icon": "/path/to/file"
              }
            ],
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SymbolRule"
            }
          }
        },
        "required": [
          "defaultIcon",
          "rules"
        ]
      },
      "DatasetSourceConnection": {
        "type": "object",
        "properties": {
          "host": {
            "type": "string"
          },
          "port": {
            "type": "number"
          },
          "username": {
            "type": "string"
          },
          "password": {
            "type": "string"
          },
          "database": {
            "type": "string",
            "description": "数据库名称"
          }
        },
        "required": [
          "host",
          "port",
          "username",
          "password",
          "database"
        ]
      },
      "CreateFrom": {
        "type": "object",
        "properties": {
          "connection": {
            "description": "第三方数据库连接相关配置",
            "example": {
              "host": "localhost",
              "port": 3306,
              "username": "root",
              "password": "root",
              "database": "test"
            },
            "allOf": [
              {
                "$ref": "#/components/schemas/DatasetSourceConnection"
              }
            ]
          },
          "driver": {
            "enum": [
              "mysql",
              "pg"
            ],
            "type": "string",
            "description": "数据库驱动类型",
            "example": "mysql"
          },
          "tableOrSubQuery": {
            "type": "string",
            "description": "数据库表名或子查询",
            "example": "(select id, pre_design_lon, pre_design_lat, status from m_shot_point_book) as data"
          },
          "uniqueIdField": {
            "type": "string",
            "description": "数据库id的字段名",
            "example": "id"
          },
          "lngField": {
            "type": "string",
            "description": "数据库经度字段名称",
            "example": "longitude"
          },
          "latField": {
            "type": "string",
            "description": "数据库纬度字段名称",
            "example": "latitude"
          }
        },
        "required": [
          "connection",
          "driver",
          "tableOrSubQuery",
          "uniqueIdField",
          "lngField",
          "latField"
        ]
      },
      "DatasetCreateInput": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "名称"
          },
          "description": {
            "type": "string",
            "description": "描述"
          },
          "customDataSourceConnection": {
            "description": "外部数据库连接配置（只支持pg）",
            "allOf": [
              {
                "$ref": "#/components/schemas/CustomDataSourceConnection"
              }
            ]
          },
          "symbols": {
            "description": "按照配置的图标和规则渲染",
            "allOf": [
              {
                "$ref": "#/components/schemas/Symbols"
              }
            ]
          },
          "id": {
            "type": "string"
          },
          "createFrom": {
            "description": "导入第三方数据库的相关配置",
            "allOf": [
              {
                "$ref": "#/components/schemas/CreateFrom"
              }
            ]
          }
        }
      },
      "Dataset": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "更新时间"
          },
          "name": {
            "type": "string",
            "description": "名称"
          },
          "description": {
            "type": "string",
            "description": "描述"
          },
          "customDataSourceConnection": {
            "description": "外部数据库连接配置（只支持pg）",
            "allOf": [
              {
                "$ref": "#/components/schemas/CustomDataSourceConnection"
              }
            ]
          },
          "symbols": {
            "description": "按照配置的图标和规则渲染",
            "allOf": [
              {
                "$ref": "#/components/schemas/Symbols"
              }
            ]
          }
        },
        "required": [
          "id",
          "createdAt",
          "updatedAt"
        ]
      },
      "DatasetPaginatedResult": {
        "type": "object",
        "properties": {
          "count": {
            "type": "number",
            "description": "数据库中的条数"
          },
          "result": {
            "description": "结果数组",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Dataset"
            }
          }
        },
        "required": [
          "count",
          "result"
        ]
      },
      "DatasetUpdateInput": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "名称"
          },
          "description": {
            "type": "string",
            "description": "描述"
          },
          "customDataSourceConnection": {
            "description": "外部数据库连接配置（只支持pg）",
            "allOf": [
              {
                "$ref": "#/components/schemas/CustomDataSourceConnection"
              }
            ]
          },
          "symbols": {
            "description": "按照配置的图标和规则渲染",
            "allOf": [
              {
                "$ref": "#/components/schemas/Symbols"
              }
            ]
          },
          "id": {
            "type": "string"
          },
          "createFrom": {
            "description": "导入第三方数据库的相关配置",
            "allOf": [
              {
                "$ref": "#/components/schemas/CreateFrom"
              }
            ]
          }
        }
      },
      "FileUploadInput": {
        "type": "object",
        "properties": {
          "file": {
            "type": "string",
            "format": "binary"
          }
        },
        "required": [
          "file"
        ]
      },
      "FileUploadResponse": {
        "type": "object",
        "properties": {
          "filename": {
            "type": "string"
          }
        },
        "required": [
          "filename"
        ]
      },
      "Geometry": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "Point",
              "Polygon"
            ],
            "description": "GeometryType",
            "default": "Point"
          },
          "coordinates": {
            "description": "点位坐标",
            "example": [
              123.1,
              33
            ],
            "type": "array",
            "items": {
              "type": "number"
            }
          }
        },
        "required": [
          "type",
          "coordinates"
        ]
      },
      "FeatureCreateInput": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "Feature"
            ],
            "description": "ElementType,",
            "default": "Feature"
          },
          "geometry": {
            "description": "GeometryType,符合GEOJSON定义的Geometry Object, https://datatracker.ietf.org/doc/html/rfc7946#section-3.1",
            "default": "Point",
            "allOf": [
              {
                "$ref": "#/components/schemas/Geometry"
              }
            ]
          },
          "properties": {
            "type": "object",
            "description": "其他属性",
            "default": "Point"
          }
        },
        "required": [
          "type",
          "geometry",
          "properties"
        ]
      },
      "Feature": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "更新时间"
          },
          "type": {
            "type": "string",
            "enum": [
              "Feature"
            ],
            "description": "ElementType,",
            "default": "Feature"
          },
          "geometry": {
            "description": "GeometryType,符合GEOJSON定义的Geometry Object, https://datatracker.ietf.org/doc/html/rfc7946#section-3.1",
            "default": "Point",
            "allOf": [
              {
                "$ref": "#/components/schemas/Geometry"
              }
            ]
          },
          "properties": {
            "type": "object",
            "description": "其他属性",
            "default": "Point"
          }
        },
        "required": [
          "id",
          "createdAt",
          "updatedAt",
          "type",
          "geometry",
          "properties"
        ]
      },
      "FeaturePaginatedResult": {
        "type": "object",
        "properties": {
          "count": {
            "type": "number",
            "description": "数据库中的条数"
          },
          "result": {
            "description": "结果数组",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Feature"
            }
          }
        },
        "required": [
          "count",
          "result"
        ]
      },
      "PolygonGeometry": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "Point",
              "Polygon"
            ],
            "default": "Polygon"
          },
          "coordinates": {
            "items": {
              "type": "array"
            },
            "type": "array"
          }
        },
        "required": [
          "type",
          "coordinates"
        ]
      },
      "GetFeatureByGeometryInput": {
        "type": "object",
        "properties": {
          "geometry": {
            "example": {
              "type": "Polygon",
              "coordinates": [
                [
                  [
                    103.2,
                    34
                  ],
                  [
                    103.4,
                    34
                  ],
                  [
                    103.4,
                    35
                  ],
                  [
                    103.2,
                    35
                  ],
                  [
                    103.2,
                    34
                  ]
                ]
              ]
            },
            "description": "符合GeoJSON协议的Polygon (https://datatracker.ietf.org/doc/html/rfc7946#appendix-A.3)",
            "allOf": [
              {
                "$ref": "#/components/schemas/PolygonGeometry"
              }
            ]
          },
          "filter": {
            "type": "string",
            "example": "a > 10 and a < 20 and b = 10",
            "description": "postgis sql where"
          }
        },
        "required": [
          "geometry"
        ]
      },
      "FeatureUpdateInput": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "Feature"
            ],
            "description": "ElementType,",
            "default": "Feature"
          },
          "geometry": {
            "description": "GeometryType,符合GEOJSON定义的Geometry Object, https://datatracker.ietf.org/doc/html/rfc7946#section-3.1",
            "default": "Point",
            "allOf": [
              {
                "$ref": "#/components/schemas/Geometry"
              }
            ]
          },
          "properties": {
            "type": "object",
            "description": "其他属性",
            "default": "Point"
          }
        }
      }
    }
  }
}