<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>server文档</title>
    <!-- <link rel="stylesheet" href="/dist/tailwind.css" /> -->
    <style>
      [v-cloak] {
        display: none;
      }
    </style>
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
  </head>
  <script type="importmap">
    {
      "imports": {
        "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
      }
    }
  </script>
  <body>
    <div class="antialiased text-gray-900 px-6" id="app" v-cloak>
      <div class="max-w-xl mx-auto py-12 divide-y md:max-w-4xl">
        <div class="py-12">
          <h2 class="text-2xl font-bold">导航</h2>
          <div class="mt-8 max-w-md">
            <div class="grid grid-cols-1 gap-6">
              <label class="block">
                <span class="text-gray-700">版本</span>
                <select class="block w-full mt-1" v-model="selectedVersion">
                  <option v-for="item in versions">{{ item }}</option>
                </select>
              </label>
              <label class="block">
                <span class="text-gray-700">ui</span>
                <select class="block w-full mt-1" v-model="selectedUi">
                  <option v-for="item in ui">{{ item }}</option>
                </select>
              </label>
              <label class="block">
                <button
                  @click="handleClick"
                  type="button"
                  class="block w-full mt-1 pointer-events-auto rounded-md bg-indigo-600 px-3 py-2 text-[0.8125rem] font-semibold leading-5 text-white hover:bg-indigo-500"
                >
                  跳转
                </button>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>

  <script type="module">
    import { createApp, ref } from "vue";
    import metadata from "./metadata.json" assert { type: "json" };
    createApp({
      setup() {
        const versions = ["latest", ...metadata.versions];
        const selectedVersion = ref("latest");
        const selectedUi = ref("swagger");
        const handleClick = ref(() => {
          window.open(
            `./${selectedUi.value}.html?version=${selectedVersion.value}`
          );
        });
        return {
          versions: versions,
          selectedVersion,
          ui: metadata.ui,
          selectedUi,
          handleClick,
        };
      },
    }).mount("#app");
  </script>
</html>
